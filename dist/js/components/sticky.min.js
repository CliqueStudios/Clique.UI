/*!
 *  CliqueUI - v1.0.4 - 2015-10-14
 *  http://ui.cliquestudios.com
 *  Copyright (c) 2015 Clique Studios;
 */

!function(a){var b;window.Clique&&(b=a(Clique)),"function"==typeof define&&define.amd&&define("clique-sticky",["clique"],function(){return console.log("something"),b||a(Clique)})}(function(a){function b(){var b=arguments.length?arguments:f;if(b.length&&!(d.scrollTop()<0))for(var c,g,h,i,j=d.scrollTop(),k=e.height(),l=d.height(),m=k-l,n=j>m?m-j:0,o=0;o<b.length;o++)if(i=b[o],i.element.is(":visible")&&!i.animate){if(i.check()){if(i.options.top<0?c=0:(h=i.element.outerHeight(),c=k-h-i.options.top-i.options.bottom-j-n,c=0>c?c+i.options.top:i.options.top),i.boundary&&i.boundary.length){var p=i.boundary.position().top;g=i.boundtoparent?k-(p+i.boundary.outerHeight())+parseInt(i.boundary.css("padding-bottom")):k-p-parseInt(i.boundary.css("margin-top")),c=j+h>k-g-(i.options.top<0?0:i.options.top)?k-g-(j+h):c}if(i.currentTop!==c){if(i.element.css({position:"fixed",top:c,width:"undefined"!=typeof i.getWidthFrom?a.$(i.getWidthFrom).width():i.element.width(),left:i.wrapper.offset().left}),!i.init&&(i.element.addClass(i.options.clsinit),location.hash&&j>0&&i.options.target)){var q=a.$(location.hash);q.length&&setTimeout(function(a,b){return function(){b.element.width();var c=a.offset(),d=c.top+a.outerHeight(),e=b.element.offset(),f=b.element.outerHeight(),g=e.top+f;e.top<d&&c.top<g&&(j=c.top-f-b.options.target,window.scrollTo(0,j))}}(q,i),0)}i.element.addClass(i.options.clsactive),i.element.css("margin",""),i.options.animation&&i.init&&i.element.addClass(i.options.animation),i.currentTop=c}}else null!==i.currentTop&&i.reset();i.init=!0}}var c;c=a.$;var d=a.$win,e=a.$doc,f=[];return a.component("sticky",{defaults:{top:0,bottom:0,animation:"",clsinit:"sticky-init",clsactive:"active",getWidthFrom:"",boundary:!1,media:!1,target:!1,disabled:!1},boot:function(){a.$doc.on("scrolling.clique.dom",function(){b()}),a.$win.on("resize orientationchange",a.utils.debounce(function(){if(f.length){for(var a=0;a<f.length;a++)f[a].reset(!0),f[a].self.computeWrapper();b()}},100)),a.ready(function(d){setTimeout(function(){a.$("[data-sticky]",d).each(function(){var b=c(this);b.data("clique.data.sticky")||a.sticky(b,a.utils.options(b.attr("data-sticky")))}),b()},0)})},init:function(){var b,c=a.$('<div class="sticky-placeholder"></div>'),g=this.options.boundary;this.wrapper=this.element.css("margin",0).wrap(c).parent(),this.computeWrapper(),g&&(g===!0?(g=this.wrapper.parent(),b=!0):"string"==typeof g&&(g=a.$(g))),this.sticky={self:this,options:this.options,element:this.element,currentTop:null,wrapper:this.wrapper,init:!1,getWidthFrom:this.options.getWidthFrom||this.wrapper,boundary:g,boundtoparent:b,reset:function(b){var c=function(){this.element.css({position:"",top:"",width:"",left:"",margin:"0"}),this.element.removeClass([this.options.animation,"animation-reverse",this.options.clsactive].join(" ")),this.currentTop=null,this.animate=!1}.bind(this);!b&&this.options.animation&&a.support.animation?(this.animate=!0,this.element.removeClass(this.options.animation).one(a.support.animation.end,function(){c()}).width(),this.element.addClass(this.options.animation+" animation-reverse")):c()},check:function(){if(this.options.disabled)return!1;if(this.options.media)switch(typeof this.options.media){case"number":if(window.innerWidth<this.options.media)return!1;break;case"string":if(window.matchMedia&&!window.matchMedia(this.options.media).matches)return!1}var a=d.scrollTop(),b=e.height(),c=b-window.innerHeight,f=a>c?c-a:0,g=this.wrapper.offset().top,h=g-this.options.top-f;return a>=h}},f.push(this.sticky)},update:function(){b(this.sticky)},enable:function(){this.options.disabled=!1,this.update()},disable:function(a){this.options.disabled=!0,this.sticky.reset(a)},computeWrapper:function(){this.wrapper.css({height:"absolute"!==this.element.css("position")?this.element.outerHeight():"","float":"none"!==this.element.css("float")?this.element.css("float"):"",margin:this.element.css("margin")})}}),a.sticky});