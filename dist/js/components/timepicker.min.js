/*!
 *  CliqueUI - v1.0.4 - 2015-10-14
 *  http://ui.cliquestudios.com
 *  Copyright (c) 2015 Clique Studios;
 */

!function(a){if("function"==typeof define&&define.amd&&define("clique-timepicker",["clique"],function(){return a(Clique)}),!window.Clique||!window.Clique.autocomplete)throw new Error("Clique.timepicker requires Clique.core and Clique.autocomplete");window.Clique&&a(Clique)}(function(a){var b,c,d,e;for(b=a.$,e={"12h":[],"24h":[]},d=0,c="";24>d;)c=""+d,10>d&&(c="0"+c),e["24h"].push({value:c+":00"}),e["24h"].push({value:c+":30"}),d>0&&13>d&&(e["12h"].push({value:c+":00 AM"}),e["12h"].push({value:c+":30 AM"})),d>12&&(c-=12,10>c&&(c="0"+String(c)),e["12h"].push({value:c+":00 PM"}),e["12h"].push({value:c+":30 PM"})),d++;return a.component("timepicker",{defaults:{format:"24h",delay:0},boot:function(){return a.$html.on("focus.timepicker.clique","[data-timepicker]",function(b){var c,d;return c=a.$(this),c.data("clique.data.timepicker")?void 0:(d=a.timepicker(c,a.utils.options(c.attr("data-timepicker"))),setTimeout(function(){return d.autocomplete.input.focus()},40))})},init:function(){var b;return b=this,this.options.minLength=0,this.options.template='<ul class="nav nav-autocomplete autocomplete-results">{{~items}}<li data-value="{{$item.value}}"><a>{{$item.value}}</a></li>{{/items}}</ul>',this.options.source=function(a){return a(e[b.options.format]||e["12h"])},this.element.wrap('<div class="autocomplete"></div>'),this.autocomplete=a.autocomplete(this.element.parent(),this.options),this.autocomplete.dropdown.addClass("dropdown-small dropdown-scrollable"),this.autocomplete.on("show.clique.autocomplete",function(){var a;return a=b.autocomplete.dropdown.find('[data-value="'+b.autocomplete.input.val()+'"]'),setTimeout(function(){return b.autocomplete.pick(a,!0)},10)}),this.autocomplete.input.on({focus:function(){return b.autocomplete.value=Math.random(),b.autocomplete.triggercomplete()},blur:function(){return b.checkTime()}}),this.element.data("timepicker",this)},checkTime:function(){var a,b,c,d,e,f;return a=null,f=null,c="AM",b=null,d=null,e=this.autocomplete.input.val(),"12h"===this.options.format?(a=e.split(" "),f=a[0].split(":"),c=a[1]):f=e.split(":"),b=parseInt(f[0],10),d=parseInt(f[1],10),isNaN(b)&&(b=0),isNaN(d)&&(d=0),"12h"===this.options.format?(b>12?b=12:0>b&&(b=12),"am"===c||"a"===c?c="AM":("pm"===c||"p"===c)&&(c="PM"),"AM"!==c&&"PM"!==c&&(c="AM")):b>=24?b=23:0>b&&(b=0),0>d?d=0:d>=60&&(d=0),this.autocomplete.input.val(this.formatTime(b,d,c)).trigger("change")},formatTime:function(a,b,c){return a=10>a?"0"+a:a,b=10>b?"0"+b:b,a+":"+b+("12h"===this.options.format?" "+c:"")}})});