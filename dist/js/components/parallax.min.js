/*!
 *  CliqueUI - v1.0.4 - 2015-10-14
 *  http://ui.cliquestudios.com
 *  Copyright (c) 2015 Clique Studios;
 */

!function(a){if("function"==typeof define&&define.amd&&define("clique-parallax",["clique"],function(){return a(Clique)}),!window.Clique)throw new Error("Clique.parallax requires Clique.core");window.Clique&&a(Clique)}(function(a){var b,c,d,e,f,g,h,i,j,k,l;return b=a.$,g=function(b,c,d){var e,f,g,h,i;return g=new Image,h=null,f=b.element.css({"background-size":"cover","background-repeat":"no-repeat"}),i=f.css("background-image").replace(/^url\(/g,"").replace(/\)$/g,"").replace(/("|')/g,""),e=function(){var a,e,g,i;return g=f.width(),a=f.height(),a+="bg"===c?d.diff:d.diff/100*a,a>g/h?(i=Math.ceil(a*h),void(e=a)):(i=g,e=Math.ceil(g/h),b.element.css({"background-size":i+"px "+e+"px"}))},g.onerror=function(){},g.onload=function(){var b;return b={w:g.width,height:g.height},h=g.width/g.height,a.$win.on("load resize orientationchange",a.utils.debounce(function(){return e()},50)),e()},g.src=i,!0},c=function(a,b,c){return a=i(a),b=i(b),c=c||0,d(a,b,c)},d=function(a,b,c){var d;return d="rgba("+parseInt(a[0]+c*(b[0]-a[0]),10)+","+parseInt(a[1]+c*(b[1]-a[1]),10)+","+parseInt(a[2]+c*(b[2]-a[2]),10)+","+(a&&b?parseFloat(a[3]+c*(b[3]-a[3])):1),d+=")"},i=function(a){var b,c,d,e,g;return b=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})/.exec(a),c=/#([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])/.exec(a),d=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(a),e=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9\.]*)\s*\)/.exec(a),g=b?[parseInt(b[1],16),parseInt(b[2],16),parseInt(b[3],16),1]:c?[17*parseInt(c[1],16),17*parseInt(c[2],16),17*parseInt(c[3],16),1]:d?[parseInt(d[1]),parseInt(d[2]),parseInt(d[3]),1]:e?[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3],10),parseFloat(e[4])]:f[a]||[255,255,255,0]},h=[],k=!1,j=0,l=window.innerHeight,e=function(){return j=a.$win.scrollTop(),a.support.requestAnimationFrame.apply(window,[function(){var a,b;for(a=0,b=[];a<h.length;)h[a].process(),b.push(a++);return b}])},a.component("parallax",{defaults:{velocity:.5,target:!1,viewport:!1},boot:function(){return k=function(){var a,b,c,d;a=document.createElement("div"),d={WebkitTransform:"-webkit-transform",MSTransform:"-ms-transform",MozTransform:"-moz-transform",Transform:"transform"},document.body.insertBefore(a,null);for(c in d)void 0!==a.style[c]&&(a.style[c]="translate3d(1px,1px,1px)",b=window.getComputedStyle(a).getPropertyValue(d[c]));return document.body.removeChild(a),"undefined"!=typeof b&&b.length>0&&"none"!==b}(),a.$doc.on("scrolling.clique.dom",e),a.$win.on("load resize orientationchange",a.utils.debounce(function(){l=window.innerHeight,e()},50)),a.ready(function(b){return a.$("[data-parallax]",b).each(function(){var b,c;b=a.$(this),b.data("clique.data.parallax")||(c=a.parallax(b,a.utils.options(b.attr("data-parallax"))))})})},init:function(){var b;return this.base=this.options.target?a.$(this.options.target):this.element,this.props={},this.velocity=this.options.velocity||1,b=["target","velocity","viewport","plugins"],Object.keys(this.options).forEach(function(a){return function(c){var d,e,f,g,h;if(-1===b.indexOf(c)){if(h=String(a.options[c]).split(","),c.match(/color/i)){if(g=h[1]?h[0]:a._getStartValue(c),f=h[1]?h[1]:h[0],!g)return void(g="rgba(255, 255, 255, 0)")}else g=parseFloat(h[1]?h[0]:a._getStartValue(c)),f=parseFloat(h[1]?h[1]:h[0]),d=f>g?f-g:g-f,e=f>g?1:-1;a.props[c]={start:g,end:f,dir:e,diff:d}}}}(this)),h.push(this)},process:function(){var a;return a=this.percentageInViewport(),this.options.viewport!==!1&&(a=0===this.options.viewport?1:a/this.options.viewport),this.update(a)},percentageInViewport:function(){var a,b,c,d,e;return e=this.base.offset().top,b=this.base.outerHeight(),e>j+l?c=0:j>e+b?c=1:l>e+b?c=(l>j?j:j-l)/(e+b):(a=j+l-e,d=Math.round(a/((l+b)/100)),c=d/100),c},update:function(a){var b,d;d={transform:""},b=a*(1-(this.velocity-this.velocity*a)),0>b&&(b=0),b>1&&(b=1),(void 0===this._percent||this._percent!==b)&&(Object.keys(this.props).forEach(function(e){return function(f){var h,i;switch(h=e.props[f],0===a?i=h.start:1===a?i=h.end:void 0!==h.diff&&(i=h.start+h.diff*b*h.dir),"bg"!==f&&"bgp"!==f||e._bgcover||(e._bgcover=g(e,f,h)),f){case"x":d.transform+=k?" translate3d("+i+"px, 0, 0)":" translateX("+i+"px)";break;case"xp":d.transform+=k?" translate3d("+i+"%, 0, 0)":" translateX("+i+"%)";break;case"y":d.transform+=k?" translate3d(0, "+i+"px, 0)":" translateY("+i+"px)";break;case"yp":d.transform+=k?" translate3d(0, "+i+"%, 0)":" translateY("+i+"%)";break;case"rotate":d.transform+=" rotate("+i+"deg)";break;case"scale":d.transform+=" scale("+i+")";break;case"bg":d["background-position"]="50% "+i+"px";break;case"bgp":d["background-position"]="50% "+i+"%";break;case"color":case"background-color":case"border-color":d[f]=c(h.start,h.end,b);break;default:d[f]=i}}}(this)),this.element.css(d),this._percent=b)},_getStartValue:function(a){var b;switch(b=0,a){case"scale":b=1;break;default:b=this.element.css(a)}return b||0}}),f={black:[0,0,0,1],blue:[0,0,255,1],brown:[165,42,42,1],cyan:[0,255,255,1],fuchsia:[255,0,255,1],gold:[255,215,0,1],green:[0,128,0,1],indigo:[75,0,130,1],khaki:[240,230,140,1],lime:[0,255,0,1],magenta:[255,0,255,1],maroon:[128,0,0,1],navy:[0,0,128,1],olive:[128,128,0,1],orange:[255,165,0,1],pink:[255,192,203,1],purple:[128,0,128,1],violet:[128,0,128,1],red:[255,0,0,1],silver:[192,192,192,1],white:[255,255,255,1],yellow:[255,255,0,1],transparent:[255,255,255,0]},a.parallax});