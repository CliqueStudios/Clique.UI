/*!
 *  CliqueUI - v1.0.4 - 2015-10-14
 *  http://ui.cliquestudios.com
 *  Copyright (c) 2015 Clique Studios;
 */

!function(a){if("function"==typeof define&&define.amd&&define("clique-utility",["clique"],function(){return a(Clique)}),!window.Clique)throw new Error("Clique.utility requires Clique.core");window.Clique&&a(Clique)}(function(a){var b,c;b=a.$,c=[],a.component("stackMargin",{defaults:{cls:"margin-small-top"},boot:function(){return a.ready(function(c){return b("[data-margin]",c).each(function(){var c,d;c=b(this),c.data("clique.data.stackMargin")||(d=a.stackMargin(c,a.utils.options(c.attr("data-margin"))))})})},init:function(){var b;return b=this,this.columns=this.element.children(),this.columns.length?(a.$win.on("resize orientationchange",function(){var c;return c=function(){return b.process()},a.$(function(){return c(),a.$win.on("load",c)}),a.utils.debounce(c,20)}()),a.$html.on("changed.clique.dom",function(a){return b.columns=b.element.children(),b.process()}),this.on("display.clique.check",function(a){return function(c){return b.columns=b.element.children(),a.element.is(":visible")?a.process():void 0}}(this)),c.push(this)):void 0},process:function(){return a.utils.stackMargin(this.columns,this.options),this},revert:function(){return this.columns.removeClass(this.options.cls),this}}),a.ready(function(){var c,d;return d=[],c=function(){return d.forEach(function(a){var b,c,d,e;if(a.is(":visible"))return e=a.parent().width(),c=a.data("width"),d=e/c,b=Math.floor(d*a.data("height")),a.css({height:c>e?b:a.data("height")})})},a.$win.on("resize",a.utils.debounce(c,15)),function(a){return b("iframe.responsive-width",a).each(function(){var a;return a=b(this),!a.data("responsive")&&a.attr("width")&&a.attr("height")?(a.data("width",a.attr("width")),a.data("height",a.attr("height")),a.data("responsive",!0),d.push(a)):void 0}),c()}}()),a.utils.stackMargin=function(c,d){var e,f,g;return d=a.$.extend({cls:"margin-small-top"},d),d.cls=d.cls,c=b(c).removeClass(d.cls),g=!1,e=c.filter(":visible:first"),f=e.length?e.position().top+e.outerHeight()-1:!1,f!==!1?c.each(function(){var a;if(a=b(this),a.is(":visible")){if(g)return a.addClass(d.cls);a.position().top>=f&&(g=a.addClass(d.cls))}}):void 0}});