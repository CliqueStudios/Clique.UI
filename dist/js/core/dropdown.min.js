/*!
 *  CliqueUI - v1.0.4 - 2015-10-14
 *  http://ui.cliquestudios.com
 *  Copyright (c) 2015 Clique Studios;
 */

!function(a){if("function"==typeof define&&define.amd&&define("clique-dropdown",["clique"],function(){return a(Clique)}),!window.Clique)throw new Error("Clique.dropdown requires Clique.core");window.Clique&&a(Clique)}(function(a){var b,c,d;return b=a.$,c=!1,d=null,a.component("dropdown",{defaults:{trigger:"hover",remaintime:800,delay:0},remainIdle:!1,boot:function(){var c=a.support.touch?"click":"mouseenter";a.$html.on(c+".dropdown.clique","[data-dropdown]",function(d){var e,f;return e=b(this),!e.data("clique.data.dropdown")&&(f=a.dropdown(e,a.utils.options(e.data("dropdown"))),("click"===c||"mouseenter"===c&&"hover"===f.options.trigger)&&f.element.trigger(c),f.element.find(".dropdown").length)?d.preventDefault():void 0})},init:function(){var c=this;this.dropdown=this.find(".dropdown"),this.centered=this.dropdown.hasClass("dropdown-center"),this.boundary=b(this.options.boundary).length?b(this.options.boundary):a.$win,this.flipped=this.dropdown.hasClass("dropdown-flip"),this.scrollable=this.dropdown.hasClass("dropdown-scrollable"),this.setAria(),"click"===this.options.trigger||a.support.touch?this.on("click.clique.dropdown",function(a){var d;return d=b(a.target),d.parents(".dropdown").length||((d.is('a[href="#"]')||d.parent().is('a[href="#"]')||c.dropdown.length&&!c.dropdown.is(":visible"))&&a.preventDefault(),d.blur()),c.element.hasClass("open")?d.is("a:not(.js-prevent)")||d.is(".dropdown-close")||!c.dropdown.find(a.target).length?c.hide():void 0:c.show()}):this.on("mouseenter",function(a){c.remainIdle&&clearTimeout(c.remainIdle),d&&clearTimeout(d),d=setTimeout(c.show.bind(c),c.options.delay)}).on("mouseleave",function(){d&&clearTimeout(d),c.remainIdle=setTimeout(function(){return c.hide()},c.options.remaintime)}).on("click",function(a){var d;return d=b(a.target),c.remainIdle&&clearTimeout(c.remainIdle),(d.is("a[href='#']")||d.parent().is("a[href='#']"))&&a.preventDefault(),c.show()})},show:function(){return a.$html.off("click.outer.dropdown"),c&&c[0]!==this.element[0]&&(c.removeClass("open"),c.attr("aria-expanded","false")),d&&clearTimeout(d),this.element.addClass("open"),this.setAria(),this.trigger("show.clique.dropdown",[this]),a.utils.checkDisplay(this.dropdown,!0),c=this.element,this.registerOuterClick()},hide:function(){this.element.removeClass("open"),this.remainIdle=!1,this.setAria(),this.trigger("hide.clique.dropdown",[this]),c&&c[0]===this.element[0]&&(c=!1)},setAria:function(){this.element.attr("aria-haspopup","true"),this.element.attr("aria-expanded",this.element.hasClass("open"))},registerOuterClick:function(){var e;return e=this,a.$html.off("click.outer.dropdown"),setTimeout(function(){return a.$html.on("click.outer.dropdown",function(f){var g;return d&&clearTimeout(d),g=b(f.target),c&&c[0]===e.element[0]&&(g.is("a:not(.js-prevent)")||g.is(".dropdown-close")||!e.dropdown.find(f.target).length)?(e.hide(),a.$html.off("click.outer.dropdown")):void 0})},10)}})});