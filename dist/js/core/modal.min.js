/*!
 *  CliqueUI - v1.0.4 - 2015-10-14
 *  http://ui.cliquestudios.com
 *  Copyright (c) 2015 Clique Studios;
 */

!function(a){if("function"==typeof define&&define.amd&&define("clique-modal",["clique"],function(){return a(Clique)}),!window.Clique)throw new Error("Clique.modal requires Clique.core");window.Clique&&a(Clique)}(function(a){var b,c,d;b=a.$,d=function(a,c){return c?("object"==typeof a?(a=a instanceof jQuery?a:b(a),a.parent().length&&(c.persist=a,c.persist.data("modalPersistParent",a.parent()))):a="string"==typeof a||"number"==typeof a?b("<div></div>").html(a):b("<div></div>").html("Clique.modal Error : Unsupported data type : "+typeof a),a.appendTo(c.element.find(".modal-dialog")),c):void 0},c=!1,a.component("modal",{scrollable:!1,transition:!1,defaults:{keyboard:!0,bgclose:!0,minScrollHeight:150,center:!1},init:function(){var c;return c=this,this.transition=a.support.transition,this.paddingdir="padding-"+("left"===a.langdirection?"right":"left"),this.dialog=this.find(".modal-dialog"),this.element.attr("aria-hidden",this.element.hasClass("open")),this.on("click",".modal-close",function(a){return a.preventDefault(),c.hide()}).on("click",function(a){var d;return d=b(a.target),d[0]===c.element[0]&&c.options.bgclose?c.hide():void 0})},toggle:function(){return this[this.isActive()?"hide":"show"]()},show:function(){var b;return b=this,this.isActive()?void 0:(c&&c.hide(!0),this.element.removeClass("open").show(),this.resize(),c=this,a.$html.addClass("modal-page").height(),this.element.addClass("open"),this.element.attr("aria-hidden","false"),this.element.trigger("show.clique.modal"),a.utils.checkDisplay(this.dialog,!0),this)},hide:function(b){var c;if(this.isActive())return!b&&a.support.transition?(c=this,this.one(a.support.transition.end,function(){return c._hide()}).removeClass("open")):this._hide(),this},resize:function(){var b,c,d;return b=a.$body.width(),this.scrollbarwidth=window.innerWidth-b,a.$body.css(this.paddingdir,this.scrollbarwidth),this.element.css("overflow-y",this.scrollbarwidth?"scroll":"auto"),!this.updateScrollable()&&this.options.center?(c=this.dialog.outerHeight(),d=parseInt(this.dialog.css("margin-top"),10)+parseInt(this.dialog.css("margin-bottom"),10),c+d<window.innerHeight?this.dialog.css({top:window.innerHeight/2-c/2-d}):this.dialog.css({top:""})):void 0},updateScrollable:function(){var a,b,c,d,e;return d=this.dialog.find(".overflow-container:visible:first"),d.length?(d.css("height",0),c=Math.abs(parseInt(this.dialog.css("margin-top"),10)),a=this.dialog.outerHeight(),e=window.innerHeight,b=e-2*(20>c?20:c)-a,d.css("height",b<this.options.minScrollHeight?"":b),!0):!1},_hide:function(){return this.element.hide().removeClass("open"),this.element.attr("aria-hidden","true"),a.$html.removeClass("modal-page"),a.$body.css(this.paddingdir,""),c===this&&(c=!1),this.trigger("hide.clique.modal")},isActive:function(){return c===this}}),a.component("modalTrigger",{boot:function(){return a.$html.on("click.modal.clique","[data-modal]",function(c){var d,e;return d=b(this),d.is("a")&&c.preventDefault(),d.data("clique.data.modalTrigger")?void 0:(e=a.modalTrigger(d,a.utils.options(d.attr("data-modal"))),e.show())}),a.$html.on("keydown.modal.clique",function(a){return c&&27===a.keyCode&&c.options.keyboard?(a.preventDefault(),c.hide()):void 0}),a.$win.on("resize orientationchange",a.utils.debounce(function(){return c?c.resize():void 0},150))},init:function(){var b;return b=this,this.options=a.$.extend({target:b.element.is("a")?b.element.attr("href"):!1},this.options),this.modal=a.modal(this.options.target,this.options),this.on("click",function(a){return a.preventDefault(),b.show()}),this.proxy(this.modal,"show hide isActive")}}),a.modal.dialog=function(c,e){var f;return f=a.modal(b(a.modal.dialog.template).appendTo("body"),e),f.on("hide.clique.modal",function(){return f.persist&&(f.persist.appendTo(f.persist.data("modalPersistParent")),f.persist=!1),f.element.remove()}),d(c,f),f},a.modal.dialog.template='<div class="modal"><div class="modal-dialog" style="min-height :0;"></div></div>',a.modal.alert=function(b,c){return a.modal.dialog(['<div class="margin modal-content">'+String(b)+"</div>",'<div class="modal-footer text-right"><button class="button button-primary modal-close">Ok</button></div>'].join(""),a.$.extend({bgclose:!1,keyboard:!1},c)).show()},a.modal.confirm=function(b,c,d){var e;return c=a.$.isFunction(c)?c:function(){},e=a.modal.dialog(['<div class="margin modal-content">'+String(b)+"</div>",'<div class="modal-footer text-right"><button class="button button-primary js-modal-confirm">Ok</button> <button class="button modal-close">Cancel</button></div>'].join(""),a.$.extend({bgclose:!1,keyboard:!1},d)),e.element.find(".js-modal-confirm").on("click",function(){return c(),e.hide()}),e.show()}});