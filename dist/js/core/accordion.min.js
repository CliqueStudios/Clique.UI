/*!
 *  CliqueUI - v1.0.4 - 2015-10-14
 *  http://ui.cliquestudios.com
 *  Copyright (c) 2015 Clique Studios;
 */

!function(a){if("function"==typeof define&&define.amd&&define("clique-accordion",["clique"],function(){return a(Clique)}),!window.Clique)throw new Error("Clique.accordion requires Clique.core");window.Clique&&a(Clique)}(function(a){var b;return b=a.$,a.component("accordion",{defaults:{showfirst:!0,collapse:!0,animate:!0,easing:"swing",duration:300,toggle:".accordion-title",containers:".accordion-content",clsactive:"active"},boot:function(){return a.ready(function(b){return setTimeout(function(){return a.$("[data-accordion]",b).each(function(){var b;return b=a.$(this),b.data("clique.data.accordion")?void 0:a.accordion(b,a.utils.options(b.attr("data-accordion")))})},0)})},init:function(){var b;return b=this,this.element.on("click.clique.accordion",this.options.toggle,function(c){return c.preventDefault(),b.toggleItem(a.$(this).data("wrapper"),b.options.animate,b.options.collapse)}),this.update(),this.options.showfirst?this.toggleItem(this.toggle.eq(0).data("wrapper"),!1,!1):void 0},getHeight:function(b){var c,d,e;return c=a.$(b),d="auto",c.is(":visible")?d=c.outerHeight():(e={position:c.css("position"),visibility:c.css("visibility"),display:c.css("display")},d=c.css({position:"absolute",visibility:"hidden",display:"block"}).outerHeight(),c.css(e)),d},toggleItem:function(b,c,d){var e,f;return e=this,b.data("toggle").toggleClass(this.options.clsactive),f=b.data("toggle").hasClass(this.options.clsactive),d&&(this.toggle.not(b.data("toggle")).removeClass(this.options.clsactive),this.content.not(b.data("content")).parent().stop().animate({height:0},{easing:this.options.easing,duration:c?this.options.duration:0}).attr("aria-expanded","false")),c?b.stop().animate({height:f?e.getHeight(b.data("content")):0},{easing:this.options.easing,duration:this.options.duration,complete:function(){return f&&(a.utils.checkDisplay(b.data("content")),b.height("auto")),e.trigger("display.clique.check")}}):(b.stop().height(f?"auto":0),f&&a.utils.checkDisplay(b.data("content")),this.trigger("display.clique.check")),b.attr("aria-expanded",f),this.element.trigger("toggle.clique.accordion",[f,b.data("toggle"),b.data("content")])},update:function(){var b;return b=this,this.toggle=this.find(this.options.toggle),this.content=this.find(this.options.containers),this.content.each(function(c){var d,e,f;return d=a.$(this),d.parent().data("wrapper")?f=d.parent():(f=a.$(this).wrap('<div data-wrapper="true" style="overflow :hidden;height :0;position :relative;"></div>').parent(),f.attr("aria-expanded","false")),e=b.toggle.eq(c),f.data("toggle",e),f.data("content",d),e.data("wrapper",f),d.data("wrapper",f)}),this.element.trigger("update.clique.accordion",[this])}}),a.accordion});